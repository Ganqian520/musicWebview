var _=Object.defineProperty;var h=(s,e,t)=>e in s?_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>(h(s,typeof e!="symbol"?e+"":e,t),t);import{p as n}from"./Player.7db91f11.js";import{_ as x}from"./index.adfedd9b.js";import{r as u,l as y,x as M,o as X,c as w,a as p,n as R}from"./vendor.d4761c69.js";import"./request.7603579f.js";class Y{constructor(){c(this,"listener",null);c(this,"panner",null)}move(e,t){this.panner.positionX.value=parseInt(e),this.panner.positionZ.value=parseInt(t)}init(){this.listener=n.ctx.listener,this.listener.positionX.value=100,this.listener.positionY.value=0,this.listener.positionZ.value=100,this.listener.forwardX.value=0,this.listener.forwardY.value=0,this.listener.forwardZ.value=-1,this.listener.upX.value=0,this.listener.upY.value=1,this.listener.upZ.value=0,this.panner=new PannerNode(n.ctx,{panningModel:"HRTF",distanceModel:"linear",positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:-1,refDistance:1,maxDistance:200,rolloffFactor:1e5,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:.1}),this.connect()}connect(){n.analyser.disconnect(n.ctx.destination),n.analyser.connect(this.panner).connect(n.ctx.destination)}dispose(){n.analyser.disconnect(this.panner),this.panner.disconnect(n.ctx.destination),n.analyser.connect(n.ctx.destination)}}const g={class:"effect"},Z={class:"circle"},I={setup(s){let e;const a=u(100),l=u(100);let i=0;const r=u(!1);let f=null;y(()=>{v()}),M(()=>{e==null||e.dispose(),cancelAnimationFrame(f)});function v(){if(f=window.requestAnimationFrame(v),n.ctx)e||(e=new Y,e.init());else return;r.value||(i=i+.05>Math.PI*2?0:i+.05,a.value=Math.cos(i)*100+100,l.value=Math.sin(i)*100+100,e.move(a.value,l.value))}function m(o){!e||(r.value=!0,a.value=o.offsetX,l.value=o.offsetY,e.move(o.offsetX,o.offsetY))}return(o,d)=>(X(),w("div",g,[p("div",Z,[p("span",{class:"listener iconfont icon-yinxiang",style:R({left:a.value+"px",top:l.value+"px"})},"\u97F3",4),p("div",{class:"mask",onMousemove:m,onMouseleave:d[0]||(d[0]=()=>r.value=!1)},null,32)])]))}};var N=x(I,[["__scopeId","data-v-533ab540"]]);export{N as default};
